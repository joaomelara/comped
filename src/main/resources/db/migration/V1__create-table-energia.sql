CREATE TABLE SETOR_EMPRESA (
    ID_SETOR       NUMBER GENERATED BY DEFAULT AS IDENTITY,
    NOME_SETOR     VARCHAR2(50) NOT NULL,
    CONSTRAINT PK_SETOR_EMPRESA PRIMARY KEY (ID_SETOR)
);

CREATE TABLE EQUIPAMENTOS_MONITORADOS (
    ID_EQUIPAMENTO     NUMBER GENERATED BY DEFAULT AS IDENTITY,
    SETOR_ID           NUMBER NOT NULL,
    NOME_EQUIPAMENTO   VARCHAR2(100) NOT NULL,
    DATA_INSTALACAO    DATE NOT NULL,
    ATIVO             NUMBER(1) DEFAULT 1,
    LIMITE_KWH         NUMBER NOT NULL,
    CONSTRAINT PK_EQUIPAMENTOS PRIMARY KEY (ID_EQUIPAMENTO),
    CONSTRAINT FK_EQP_SETOR FOREIGN KEY (SETOR_ID)
        REFERENCES SETOR_EMPRESA(ID_SETOR)
);

CREATE TABLE CONSUMO_ENERGIA (
    ID_CONSUMO     NUMBER GENERATED BY DEFAULT AS IDENTITY,
    EQUIP_ID       NUMBER NOT NULL,
    DATA_CONSUMO   TIMESTAMP NOT NULL,
    KWH_CONSUMO    NUMBER NOT NULL,
    CONSTRAINT PK_CONSUMO_ENERGIA PRIMARY KEY (ID_CONSUMO),
    CONSTRAINT FK_CONS_EQP FOREIGN KEY (EQUIP_ID)
        REFERENCES EQUIPAMENTOS_MONITORADOS(ID_EQUIPAMENTO)
);

CREATE TABLE USUARIOS (
    ID_USUARIO     NUMBER GENERATED BY DEFAULT AS IDENTITY,
    NOME_USUARIO VARCHAR2(100) NOT NULL,
    EMAIL_USUARIO VARCHAR2(100) NOT NULL,
    SENHA_USUARIO VARCHAR2(255) NOT NULL,
    ROLE VARCHAR2(20) NOT NULL,
    CONSTRAINT UK_EMAIL_USUARIO UNIQUE (EMAIL_USUARIO)
);